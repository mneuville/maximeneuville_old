!function(e){"use strict";e.Common=function(){this.settings={offset:90,duration:500,effect:"slide",options:{direction:"left"},nb_project:10,currentProject:null,heightLine:125,keyLeft:37,keyRight:39,keyEscape:27},this.elements={win:e(window),document:e(document),htmlBody:e("html, body"),menu:e("nav"),menuItem:e("li > a","nav"),backTop:e("#back-top"),wrapper:e("body > .wrapper"),detail:e("#detail"),projects:e("#projects"),projectLink:e("figure figcaption a","#projects"),projectClose:e("a.close","#detail"),projectNext:e("a.next","#detail"),projectPrevious:e("a.previous","#detail"),projectContainer:e(".block-content","#detail"),projectPagination:e("a.next, a.previous","#detail"),btnMore:e(".more"),experiences:e("#experiences")},this.init()},e.Common.prototype={init:function(){var e=this;e.bindEvents(),e.menu(),e.backToTop(),e.updateTimeline()},bindEvents:function(){var t=this;t.elements.projectLink.click(function(n){n.preventDefault();var i=e(this).next(".container");i.clone().appendTo(t.elements.projectContainer),t.toggleProject(e(this))}),t.elements.projectClose.click(function(n){n.preventDefault(),t.toggleProject(e(this),!0)}),t.elements.projectPagination.on("click",{self:t},t.changeProject),t.elements.btnMore.on("click",{self:t},t.toggleCollapse),t.elements.document.on("keyup",{self:t},t.keysNavigation)},toggleProject:function(e,t){var n=this;(n.elements.detail.is(":visible")||t!==!0)&&this.elements.detail.toggle(n.settings.effect,n.settings.options,n.settings.duration,function(){t===!0?n.elements.projectContainer.html(""):(n.settings.currentProject=e.parents("figure").data("id"),n.updatePagination())})},changeProject:function(t){var n=t.data.self;if(n.elements.detail.is(":visible")){var i=e(this).hasClass("next")?n.settings.currentProject+1:n.settings.currentProject-1;i>=1&&i<=n.settings.nb_project&&n.updateProject(i)}},updateProject:function(e){this.elements.projectContainer.html("");var t=this.elements.projects.find("figure[data-id='"+e+"']"),n=t.find(".container");n.clone().appendTo(this.elements.projectContainer),this.settings.currentProject=e,this.updatePagination()},updatePagination:function(){this.elements.projectNext.attr("title",this.elements.projectNext.data("title")),this.elements.projectPrevious.attr("title",this.elements.projectPrevious.data("title")),this.elements.projectPagination.removeClass("disable"),1===this.settings.currentProject&&(this.elements.projectPrevious.addClass("disable"),this.elements.projectPrevious.removeAttr("title")),this.settings.nb_project===this.settings.currentProject&&(this.elements.projectNext.addClass("disable"),this.elements.projectNext.removeAttr("title"))},keysNavigation:function(e){var t=e.data.self;e.keyCode==t.settings.keyEscape&&t.elements.projectClose.trigger("click"),e.keyCode==t.settings.keyLeft&&t.elements.projectPrevious.trigger("click"),e.keyCode==t.settings.keyRight&&t.elements.projectNext.trigger("click")},menu:function(){var t=this;t.elements.menuItem.click(function(n){n.preventDefault();var i=e(this).attr("href");t.elements.htmlBody.animate({scrollTop:e(i).offset().top},"slow")})},backToTop:function(){var t=this;t.elements.backTop.click(function(e){e.preventDefault(),t.elements.htmlBody.animate({scrollTop:0},t.settings.duration)}),t.elements.win.scroll(function(){e(this).scrollTop()>=t.settings.offset?t.elements.backTop.fadeIn(t.settings.duration):t.elements.backTop.fadeOut(t.settings.duration)})},toggleCollapse:function(t){var n=t.data.self;e(this).parents("li").toggleClass("collapsed expanded"),n.updateTimeline()},updateTimeline:function(){var e=this,t=e.elements.experiences.innerHeight()-parseInt(e.settings.heightLine);e.elements.experiences.find(".line").height(t)}},e(document).ready(function(){new e.Common})}(jQuery);